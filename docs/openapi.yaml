openapi: 3.0.3
info:
  title: WithPet Integrated API
  version: 1.0.0
  description: |-
    ğŸ¾ **WithPet ì„œë¹„ìŠ¤ í†µí•© API**

    ì»¤ë®¤ë‹ˆí‹°, ì¸ì¦, ì§€ì—­/ë§¤ì¥ ê²€ìƒ‰ ê¸°ëŠ¥ì„ í†µí•©í•œ ëª…ì„¸ì…ë‹ˆë‹¤.
    ëª¨ë“  ì†ì„±ëª…ì€ **snake_case**ë¡œ í†µì¼ë˜ì—ˆìŠµë‹ˆë‹¤.
servers:
  # Added by API Auto Mocking Plugin
  - description: SwaggerHub API Auto Mocking
    url: https://oz-withpet.kro.kr/
  - url: https://virtserver.swaggerhub.com/pet_api/pet_API/1.0.0

tags:
  - name: Posts
  - name: Comments
  - name: Likes
  - name: Reports
  - name: Auth
    description: íšŒì›ê°€ì… ë° ë¡œê·¸ì¸ ê´€ë ¨ API
  - name: Mypage
    description: ë§ˆì´í˜ì´ì§€ API
  - name: Locations
    description: ì§€ì—­ ì •ë³´ ì¡°íšŒ
  - name: Categories
    description: ì„œë¹„ìŠ¤ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
  - name: Stores
    description: ë§¤ì¥ ê²€ìƒ‰
  - name: Store Likes
    description: ë§¤ì¥ ê´€ì‹¬ì¥ì†Œ ê´€ë¦¬

paths:
  # -----------------------------
  # ì»¤ë®¤ë‹ˆí‹° (ì‚¬ìš©ì ì›ë³¸ ê·¸ëŒ€ë¡œ, IDë§Œ base64 ë¬¸ìì—´ Id64ë¡œ í†µí•©)
  # -----------------------------
  /posts:
    get:
      tags: [Posts]
      summary: Posts list (main or community)
      description: |
        - **view=main**: ë©”ì¸(ë¬´í•œìŠ¤í¬ë¡¤). `after` ì»¤ì„œ ê¸°ë°˜, `limit` ì‚¬ìš©.
        - **view=community**: ì»¤ë®¤ë‹ˆí‹°(í˜ì´ì§€ë„¤ì´ì…˜). `page`/`page_size`, `category`, `sort`, `q`, `search_in` ì‚¬ìš©.
        - **ìœ íš¨í•œ ì¡°í•©ë§Œ í—ˆìš©**í•©ë‹ˆë‹¤. ì˜ˆ) `view=main`ì—ì„œ `page`/`page_size`/`category`/`sort`/`q`/`search_in`ì„ ë³´ë‚´ê±°ë‚˜,
          `view=community`ì—ì„œ `after`/`limit`ì„ ë³´ë‚´ë©´ **400 Bad Request**ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.
      parameters:
        - $ref: '#/components/parameters/View'
        - $ref: '#/components/parameters/After'
        - $ref: '#/components/parameters/Limit'
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
        - $ref: '#/components/parameters/Category'
        - $ref: '#/components/parameters/Sort'
        - $ref: '#/components/parameters/Q'
        - $ref: '#/components/parameters/SearchIn'
      responses:
        '200':
          description: OK
          headers:
            ETag:
              description: "ë¦¬ì†ŒìŠ¤ ë²„ì „ íƒœê·¸(ì˜µì…˜). If-None-Matchë¡œ ì¡°ê±´ë¶€ ìš”ì²­ ê°€ëŠ¥."
              schema:
                type: string
            Cache-Control:
              description: "ìºì‹± ì§€ì‹œì(ì˜ˆ: public, max-age=30)"
              schema:
                type: string
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/PostsListMainResponse'
                  - $ref: '#/components/schemas/PostsListCommunityResponse'
        '400':
          $ref: '#/components/responses/Error400'
        '429':
          $ref: '#/components/responses/Error429'
        '500':
          $ref: '#/components/responses/Error500'

    post:
      tags: [Posts]
      summary: Create post (auth)
      description: |
        ë‹¨ì¼ ì´ë¯¸ì§€(ì„ íƒ) ì²¨ë¶€ ê°€ëŠ¥. JSON ë˜ëŠ” multipart/form-data ëª¨ë‘ ì§€ì›.
        ì‘ë‹µì— ì„±ê³µ ì—¬ë¶€ ë¶ˆë¦°ì„ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      security:
        - bearerAuth: []
      requestBody:
        $ref: '#/components/requestBodies/PostCreate'
      responses:
        '201':
          description: Created
          headers:
            Location:
              description: ìƒˆ ê²Œì‹œê¸€ì˜ ê³ ì • URL
              schema:
                type: string
          content:
            application/json:
              schema:
                type: object
                properties:
                  post_id:
                    $ref: '#/components/schemas/Id64'
                required:
                  - post_id
              example:
                post_id: "MTAx"
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '415':
          $ref: '#/components/responses/Error415'
        '500':
          $ref: '#/components/responses/Error500'

  /posts/{post_id}:
    get:
      tags: [Posts]
      summary: Get single post (optional comment preview)
      description: |
        `include=comments`ë¡œ ëŒ“ê¸€ í”„ë¦¬ë·°ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ì»¤ì„œ ê¸°ë°˜ `comments_after`, ì œí•œ `comments_limit`).
      parameters:
        - $ref: '#/components/parameters/PostId64'
        - $ref: '#/components/parameters/Include'
        - $ref: '#/components/parameters/CommentsLimit'
        - $ref: '#/components/parameters/CommentsAfter'
      responses:
        '200':
          description: OK
          headers:
            ETag:
              description: ë¦¬ì†ŒìŠ¤ ë²„ì „ íƒœê·¸(ì˜µì…˜). If-None-Matchë¡œ ì¡°ê±´ë¶€ ìš”ì²­ ê°€ëŠ¥.
              schema:
                type: string
            Cache-Control:
              description: "ìºì‹± ì§€ì‹œì(ì˜ˆ: public, max-age=60)"
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostDetailResponse'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'

    patch:
      tags: [Posts]
      summary: Update post (author only, partial)
      description: |
        ì „ë‹¬ëœ í•„ë“œë§Œ ìˆ˜ì •ë©ë‹ˆë‹¤. **ëª¨ë“  í•„ë“œ nullable í—ˆìš©**(í‚¤ ìì²´ë„ ì„ íƒ).
        ì‘ë‹µì— ì„±ê³µ ì—¬ë¶€ ë¶ˆë¦°ì„ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PostId64'
      requestBody:
        $ref: '#/components/requestBodies/PostUpdate'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  post_id:
                    $ref: '#/components/schemas/Id64'
                  updated_at:
                    type: string
                    format: date-time
                required:
                  - post_id
                  - updated_at
              example:
                post_id: "MTAx"
                updated_at: "2025-10-21T12:34:56Z"
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '404':
          $ref: '#/components/responses/Error404'
        '415':
          $ref: '#/components/responses/Error415'
        '500':
          $ref: '#/components/responses/Error500'

    delete:
      tags: [Posts]
      summary: Delete post (author only)
      description: |
        ì†Œí”„íŠ¸ ì‚­ì œì¼ ìˆ˜ë„ ìˆìœ¼ë©°, ì„œë²„ ì •ì±…ì— ë”°ë¦…ë‹ˆë‹¤.
        ì„±ê³µ ì‹œ ë³¸ë¬¸ ì—†ëŠ” **204 No Content**ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PostId64'
      responses:
        '204':
          description: No Content
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'

  /posts/{post_id}/comments:
    post:
      tags: [Comments]
      summary: Create comment (auth)
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PostId64'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  minLength: 1
                  maxLength: 5000
              required:
                - content
            example:
              content: "ì¢‹ì€ ì •ë³´ ê°ì‚¬í•©ë‹ˆë‹¤! ì£¼ì°¨ëŠ” ì–´ë””ì— í•˜ë©´ ì¢‹ì„ê¹Œìš”?"
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  comment_id:
                    $ref: '#/components/schemas/Id64'
                required:
                  - comment_id
              example:
                comment_id: "NTUwMQ=="
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'

  /comments/{comment_id}:
    put:
      tags: [Comments]
      summary: Update comment (author only)
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/CommentId64'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  minLength: 1
                  maxLength: 5000
              required:
                - content
            example:
              content: "ë¬¸ì¥ì„ ì¡°ê¸ˆ ë‹¤ë“¬ì—ˆìŠµë‹ˆë‹¤!"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  comment_id:
                    $ref: '#/components/schemas/Id64'
                  updated_at:
                    type: string
                    format: date-time
                required:
                  - comment_id
                  - updated_at
              example:
                comment_id: "NTUwMQ=="
                updated_at: "2025-10-21T12:40:00Z"
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'

    delete:
      tags: [Comments]
      summary: Delete comment (author only)
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/CommentId64'
      responses:
        '204':
          description: No Content
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '404':
          $ref: '#/components/responses/Error404'
        '500':
          $ref: '#/components/responses/Error500'

  /posts/{post_id}/like:
    get:
      tags: [Likes]
      summary: Get like status
      description: |
        ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìëŠ” `is_liked: false`ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤(ì¢‹ì•„ìš” ì—¬ë¶€ íŒë‹¨ ë¶ˆê°€ ì‹œ ê¸°ë³¸ê°’).
      parameters:
        - $ref: '#/components/parameters/PostId64'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikeStatus'
              example:
                is_liked: false
                like_count: 12
        '404':
          $ref: '#/components/responses/Error404'
        '429':
          $ref: '#/components/responses/Error429'
        '500':
          $ref: '#/components/responses/Error500'

    put:
      tags: [Likes]
      summary: Like ON (idempotent)
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PostId64'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikeStatus'
              example:
                is_liked: true
                like_count: 13
        '401':
          $ref: '#/components/responses/Error401'
        '404':
          $ref: '#/components/responses/Error404'
        '429':
          $ref: '#/components/responses/Error429'
        '500':
          $ref: '#/components/responses/Error500'

    delete:
      tags: [Likes]
      summary: Like OFF (idempotent)
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PostId64'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikeStatus'
              example:
                is_liked: false
                like_count: 12
        '401':
          $ref: '#/components/responses/Error401'
        '404':
          $ref: '#/components/responses/Error404'
        '429':
          $ref: '#/components/responses/Error429'
        '500':
          $ref: '#/components/responses/Error500'

  /posts/{post_id}/report:
    post:
      tags: [Reports]
      summary: Create report (auth)
      description: |
        ì‚¬ìœ ê°€ **'ê¸°íƒ€'**ì¸ ê²½ìš° `detail`ì€ ìµœì†Œ 5ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.
        ë™ì¼ ì‚¬ìš©ìì˜ ì¤‘ë³µ ì‹ ê³ ëŠ” `409 Conflict`ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PostId64'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportRequest'
            examples:
              standard:
                summary: "ì‚¬ìœ  ì„ íƒ(ê¸°íƒ€ ì œì™¸)"
                value:
                  reason: "ë¶ˆë²• ì •ë³´"
                  detail: "í—ˆìœ„ íŒë§¤ ê¸€ ì‹ ê³ "
              other:
                summary: "ê¸°íƒ€ ì„ íƒ(5ì ì´ìƒ í•„ìˆ˜)"
                value:
                  reason: "ê¸°íƒ€"
                  detail: "ì‚¬ìœ  ì„¤ëª…ì´ í•„ìš”í•©ë‹ˆë‹¤"
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  report_id:
                    $ref: '#/components/schemas/Id64'
                required:
                  - report_id
              example:
                report_id: "OTAwMQ=="
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '404':
          $ref: '#/components/responses/Error404'
        '409':
          $ref: '#/components/responses/Error409'
        '429':
          $ref: '#/components/responses/Error429'
        '500':
          $ref: '#/components/responses/Error500'

  # Auth (ê¸°ì¡´ ë³‘í•©ë³¸ ê·¸ëŒ€ë¡œ)
  /auth/signup:
    post:
      tags: [Auth]
      summary: íšŒì›ê°€ì…
      description: ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ì‹ ê·œ ê³„ì •ì„ ìƒì„±í•©ë‹ˆë‹¤.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: ì‚¬ìš©ì ì´ë©”ì¼
                password:
                  type: string
                  minLength: 8
                  description: ë¹„ë°€ë²ˆí˜¸ (ìµœì†Œ 8ì)
                username:
                  type: string
                  minLength: 2
                  maxLength: 20
                  description: ì‚¬ìš©ì ì´ë¦„
              required:
                - email
                - password
                - username
      responses:
        '201':
          description: íšŒì›ê°€ì… ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  user_id:
                    type: string
                    description: ìƒì„±ëœ ì‚¬ìš©ì ID
                  message:
                    type: string
                    example: íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
                required:
                  - success
                  - user_id
        '400':
          $ref: '#/components/responses/Error400'
        '409':
          description: ì´ë©”ì¼ ì¤‘ë³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Api_error_wrapper'
        '500':
          $ref: '#/components/responses/Error500'

  /auth/login:
    post:
      tags: [Auth]
      summary: ë¡œê·¸ì¸
      description: ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•˜ì—¬ JWT í† í°ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: ì‚¬ìš©ì ì´ë©”ì¼
                password:
                  type: string
                  description: ë¹„ë°€ë²ˆí˜¸
              required:
                - email
                - password
      responses:
        '200':
          description: ë¡œê·¸ì¸ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  access_token:
                    type: string
                    description: JWT ì•¡ì„¸ìŠ¤ í† í°
                  refresh_token:
                    type: string
                    description: JWT ë¦¬í”„ë ˆì‹œ í† í° (ì„ íƒ ì‚¬í•­)
                  token_type:
                    type: string
                    example: Bearer
                  expires_in:
                    type: integer
                    description: í† í° ë§Œë£Œ ì‹œê°„(ì´ˆ)
                    example: 3600
                required:
                  - success
                  - access_token
                  - token_type
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          description: ë¡œê·¸ì¸ ì‹¤íŒ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Api_error_wrapper'
        '500':
          $ref: '#/components/responses/Error500'

  /auth/refresh:
    post:
      tags: [Auth]
      summary: í† í° ê°±ì‹ 
      description: ë¦¬í”„ë ˆì‹œ í† í°ìœ¼ë¡œ ìƒˆë¡œìš´ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                refresh_token:
                  type: string
                  description: ë¦¬í”„ë ˆì‹œ í† í°
              required:
                - refresh_token
      responses:
        '200':
          description: í† í° ê°±ì‹  ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  access_token:
                    type: string
                    description: ìƒˆë¡œìš´ JWT ì•¡ì„¸ìŠ¤ í† í°
                  token_type:
                    type: string
                    example: Bearer
                  expires_in:
                    type: integer
                    description: í† í° ë§Œë£Œ ì‹œê°„(ì´ˆ)
                required:
                  - success
                  - access_token
                  - token_type
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          description: ìœ íš¨í•˜ì§€ ì•Šì€ ë¦¬í”„ë ˆì‹œ í† í°
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Api_error_wrapper'
        '500':
          $ref: '#/components/responses/Error500'
          
  # -----------------------------
  # MyPage ( ë§ˆì´ í˜ì´ì§€ API )
  # -----------------------------
  
  /mypage/profile:
    get:
      tags: [Mypage]
      summary: ë‚´ í”„ë¡œí•„ ì¡°íšŒ
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ í”„ë¡œí•„ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
      security:
        - bearerAuth: []
      responses:
        '200':
          description: í”„ë¡œí•„ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MyProfileResponse'
              example:
                success: true
                data:
                  email: "test@test.com"
                  nickname: "nickname"
                  username: "real_name"
                  gender: "male"
                  has_pet: false
                  created_at: "2025-11-06T12:00:00Z"
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'

    patch:
      tags: [Mypage]
      summary: ë‚´ í”„ë¡œí•„ ìˆ˜ì • 
      description: ë‹‰ë„¤ì„ ë³€ê²½, ì„±ë³„, ë°˜ë ¤ë™ë¬¼ ìœ ë¬´ ë“±ì„ ì„ íƒ ìˆ˜ì •í•©ë‹ˆë‹¤. ë‹‰ë„¤ì„ ë³€ê²½ ì‹œ ì„œë²„ëŠ” ì¤‘ë³µ ì²´í¬ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. (ë¶€ë¶„ ìˆ˜ì • í—ˆìš©)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MyProfileUpdateRequest'
            example:
              nickname: "NewNickName"
              gender: "female"
              has_pet: true
      responses:
        '200':
          description: í”„ë¡œí•„ ìˆ˜ì • ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Api_success_wrapper'
              example:
                success: true
                message: "í”„ë¡œí•„ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '409':
          description: ë‹‰ë„¤ì„ ì¤‘ë³µ or ê¸°ì¡´ ë‹‰ë„¤ì„ê³¼ ê°™ìŒ ë“± ì¶©ëŒ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Api_error_wrapper'
        '500':
          $ref: '#/components/responses/Error500'

  /mypage/profile/check-nickname:
    get:
      tags: [Mypage]
      summary: ë‹‰ë„¤ì„ ì¤‘ë³µ ê²€ì‚¬
      description: ì¿¼ë¦¬ë¡œ ì „ë‹¬ëœ ë‹‰ë„¤ì„ì´ ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.
      parameters:
        - name: nickname
          in: query
          required: true
          schema:
            type: string
            minLength: 2
            maxLength: 30
      responses:
        '200':
          description: ê²€ì‚¬ ê²°ê³¼ ë°˜í™˜
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  is_available:
                    type: boolean
                required: [success, is_available]
              example:
                success: true
                is_available: false
        '400':
          $ref: '#/components/responses/Error400'
        '500':
          $ref: '#/components/responses/Error500'

  /mypage/password:
    post:
      tags: [Mypage]
      summary: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
      description: í˜„ì¬ ì¸ì¦ëœ ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. (í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìƒˆ ë¹„ë°€ë²ˆí˜¸ì™€ ì¬ì…ë ¥ í™•ì¸)
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PasswordChangeRequest'
            example:
              new_password: "newpassword"
              new_password_confirm: "newpassword"
      responses:
        '200':
          description: ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Api_success_wrapper'
              example:
                success: true
                message: "ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          description: ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ë¶ˆì¼ì¹˜
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Api_error_wrapper'
        '500':
          $ref: '#/components/responses/Error500'

  /mypage/withdraw:
    post:
      tags: [Mypage]
      summary: íšŒì› íƒˆí‡´
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ê³„ì •ì„ ì‚­ì œ(ë˜ëŠ” ë¹„í™œì„±í™”)í•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
                  description: íƒˆí‡´ ìš”ì²­ ì‹œ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ìš©(ì„ íƒ)
            example:
              password: "password"
      responses:
        '204':
          description: íšŒì› íƒˆí‡´ ì„±ê³µ
        '400':
          $ref: '#/components/responses/Error400'
        '401':
          $ref: '#/components/responses/Error401'
        '403':
          $ref: '#/components/responses/Error403'
        '500':
          $ref: '#/components/responses/Error500'

  # -----------------------------
  # Mypage lists: ë‚´ ê¸€ / ë‚´ê°€ ì¢‹ì•„ìš”í•œ ê¸€ / ë‚´ê°€ ì‹ ê³ í•œ ê¸€
  # -----------------------------
  /mypage/posts:
    get:
      tags: [Mypage]
      summary: ë‚´ê°€ ì‘ì„±í•œ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ 
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ì‘ì„±í•œ ê²Œì‹œê¸€ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
        - $ref: '#/components/parameters/After'
        - $ref: '#/components/parameters/Limit'
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PostsListCommunityResponse'
              example:
                posts:
                  - id: MTAx
                    title: "ë‚´ê°€ ì“´ ê¸€ ì˜ˆì‹œ"
                    content_snippet: "ê°„ë‹¨í•œ ìš”ì•½(200ì)"
                    category: "ììœ ê²Œì‹œíŒ"
                    image_url: null
                    author:
                      user_id: MTE=
                      nickname: "nickname"
                    created_at: "2025-10-20T10:20:30Z"
                    updated_at: "2025-10-20T12:00:00Z"
                    view_count: 12
                    like_count: 3
                    comment_count: 0
                    is_liked_by_me: true
                page: 1
                page_size: 20
                total: 4
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'

  /mypage/likes/posts:
    get:
      tags: [Mypage]
      summary: ë‚´ê°€ ì¢‹ì•„ìš”í•œ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ì¢‹ì•„ìš”í•œ ê²Œì‹œê¸€ë“¤ì˜ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
        - $ref: '#/components/parameters/After'
        - $ref: '#/components/parameters/Limit'
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  posts:
                    type: array
                    items:
                      $ref: '#/components/schemas/PostListItemCommunity'
                  page:
                    type: integer
                  page_size:
                    type: integer
                  total:
                    type: integer
                required: [posts, page, page_size]
              example:
                posts:
                  - id: MTAx
                    title: "ì¢‹ì•„ìš”í•œ ê¸€ ì˜ˆì‹œ"
                    content_snippet: "ìš”ì•½..."
                    category: "ì •ë³´ê³µìœ "
                    image_url: null
                    author:
                      user_id: MTE=
                      nickname: "ì½”ì½”ë§˜"
                    created_at: "2025-10-20T10:20:30Z"
                    updated_at: "2025-10-20T12:00:00Z"
                    view_count: 345
                    like_count: 12
                    comment_count: 5
                    is_liked_by_me: true
                page: 1
                page_size: 20
                total: 15
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'

  /mypage/reports:
    get:
      tags: [Mypage]
      summary: ë‚´ê°€ ì‹ ê³ í•œ ê²Œì‹œê¸€ ëª©ë¡ ì¡°íšŒ
      description: í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ì‹ ê³ í•œ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤. ì‹ ê³ í•œ ëŒ€ìƒ ê²Œì‹œê¸€ ì •ë³´ì™€ ì‹ ê³  ìƒíƒœ(ì²˜ë¦¬ì¤‘/ì™„ë£Œ ë“±)ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/PageSize'
      responses:
        '200':
          description: ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  reports:
                    type: array
                    items:
                      $ref: '#/components/schemas/MyReportPost'
                  page:
                    type: integer
                  page_size:
                    type: integer
                  total:
                    type: integer
                required: [reports, page, page_size]
              example:
                reports:
                  - report_id: "MTE="
                    post:
                      id: MTE=
                      title: "ì‹ ê³ ëœ ê²Œì‹œê¸€ ì œëª©"
                      author:
                        user_id: MTk=
                        nickname: "ì‹œê³ ëœ ê²Œì‹œê¸€ ì‘ì„±ì"
                    reason: "ìŠ¤íŒ¸ ë° í™ë³´ì„± ê²Œì‹œë¬¼"
                    detail: "ë™ì¼ ë§í¬ ë°˜ë³µ ì—…ë¡œë“œ"
                    status: "processing"
                    created_at: "2025-11-01T10:00:00Z"
                page: 1
                page_size: 20
                total: 2
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'


  /map/locations:
    get:
      tags: [Locations]
      summary: ì§€ì—­ ì •ë³´ ì¡°íšŒ
      description: ê³„ì¸µì  ì§€ì—­ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤. (ë„/ì‹œ/êµ¬/ë™)
      parameters:
        - name: province
          in: query
          description: ë„/ê´‘ì—­ì‹œ (ë¯¸ì§€ì • ì‹œ ì „ì²´ ì¡°íšŒ)
          required: false
          schema:
            type: string
        - name: district
          in: query
          description: ì‹œ/êµ¬/êµ° (province í•„ìˆ˜)
          required: false
          schema:
            type: string
        - name: neighborhood
          in: query
          description: ì/ë©´/ë™ (district í•„ìˆ˜)
          required: false
          schema:
            type: string
      responses:
        '200':
          description: ì§€ì—­ ì •ë³´ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Location'
                required:
                  - data
        '400':
          $ref: '#/components/responses/Error400'
        '500':
          $ref: '#/components/responses/Error500'

  /map/categories:
    get:
      tags: [Categories]
      summary: ì„œë¹„ìŠ¤ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ
      description: ë§¤ì¥ ê²€ìƒ‰ì— ì‚¬ìš© ê°€ëŠ¥í•œ ì¹´í…Œê³ ë¦¬ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
      responses:
        '200':
          description: ì¹´í…Œê³ ë¦¬ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'
                required:
                  - success
                  - data
              example:
                data:
                  - id: "1"
                    name: ë™ë¬¼ë³‘ì›
                    code: hospital
                  - id: "2"
                    name: ì• ê²¬ì¹´í˜
                    code: cafe
                  - id: "3"
                    name: ì• ê²¬ë¯¸ìš©
                    code: grooming
        '500':
          $ref: '#/components/responses/Error500'

  /map/stores:
    get:
      tags: [Stores]
      summary: ë§¤ì¥ ê²€ìƒ‰ (ë¬´í•œ ìŠ¤í¬ë¡¤)
      description: |-

      parameters:
        - name: province
          in: query
          description: ë„/ê´‘ì—­ì‹œ
          required: false
          schema:
            type: string
            example: ì„œìš¸íŠ¹ë³„ì‹œ
        - name: district
          in: query
          description: ì‹œ/êµ¬/êµ°
          required: false
          schema:
            type: string
            example: ê°•ë‚¨êµ¬
        - name: neighborhood
          in: query
          description: ì/ë©´/ë™
          required: false
          schema:
            type: string
            example: ì—­ì‚¼ë™
        - name: categories
          in: query
          description: ì¹´í…Œê³ ë¦¬ ì½”ë“œ (ì½¤ë§ˆë¡œ êµ¬ë¶„, ì˜ˆ hospital,cafe)
          required: false
          schema:
            type: string
            example: hospital,cafe
        - name: keyword
          in: query
          description: ê²€ìƒ‰ í‚¤ì›Œë“œ (ë§¤ì¥ëª…, íƒœê·¸ ë“±)
          required: false
          schema:
            type: string
            example: 24ì‹œê°„
        - name: latitude
          in: query
          description: ì‚¬ìš©ì ìœ„ë„ (ê±°ë¦¬ ê³„ì‚°ìš©)
          required: false
          schema:
            type: number
            format: float
            example: 37.5665
        - name: longitude
          in: query
          description: ì‚¬ìš©ì ê²½ë„ (ê±°ë¦¬ ê³„ì‚°ìš©)
          required: false
          schema:
            type: number
            format: float
            example: 126.9780
        - name: cursor
          in: query
          description: í˜ì´ì§€ë„¤ì´ì…˜ ì»¤ì„œ (ë‹¤ìŒ í˜ì´ì§€ ìš”ì²­ ì‹œ ì´ì „ ì‘ë‹µì˜ next_cursor ì‚¬ìš©)
          required: false
          schema:
            type: integer
            example: 20
        - name: limit
          in: query
          description: í•œ ë²ˆì— ê°€ì ¸ì˜¬ í•­ëª© ìˆ˜ (ê¸°ë³¸ 20, ìµœëŒ€ 100)
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: ë§¤ì¥ ê²€ìƒ‰ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Store'
                  metadata:
                    $ref: '#/components/schemas/Infinite_scroll_metadata'
                  applied_filters:
                    $ref: '#/components/schemas/Applied_filters'
                required:
                  - success
                  - data
                  - metadata
              example:
                data:
                  - id: 1001
                    name: í–‰ë³µë™ë¬¼ë³‘ì›
                    category:
                      id: "1"
                      name: ë™ë¬¼ë³‘ì›
                    address:
                      province: ì„œìš¸íŠ¹ë³„ì‹œ
                      district: ê°•ë‚¨êµ¬
                      neighborhood: ì—­ì‚¼ë™
                      detail: 123-45
                      full_address: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 123-45
                      latitude: 37.55878709
                      longtitude: 126.82717098
                    phone: 02-1234-5678
                    distance: 0.8
                  - id: 1002
                    name: í«ì¼€ì–´ ë™ë¬¼ì˜ë£Œì„¼í„°
                    category:
                      id: "1"
                      name: ë™ë¬¼ë³‘ì›
                    address:
                      province: ì„œìš¸íŠ¹ë³„ì‹œ
                      district: ê°•ë‚¨êµ¬
                      neighborhood: ì‚¼ì„±ë™
                      detail: 567-89
                      full_address: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì‚¼ì„±ë™ 567-89
                      latitude: 37.55878709
                      longtitude: 126.82717098
                    phone: 02-9876-5432
                    distance: 1.2
                metadata:
                  next_cursor: 20
                  has_more: true
                  total_count: 45
                applied_filters:
                  province: ì„œìš¸íŠ¹ë³„ì‹œ
                  district: ê°•ë‚¨êµ¬
                  neighborhood: null
                  categories:
                    - hospital
                  keyword: null
        '400':
          $ref: '#/components/responses/Error400'
        '500':
          $ref: '#/components/responses/Error500'

  # -----------------------------
  # ë§¤ì¥ ê´€ì‹¬ì¥ì†Œ (Store Likes)
  # -----------------------------
  /map/stores/{store_id}/like:
    get:
      tags: [Store Likes]
      summary: ë§¤ì¥ ê´€ì‹¬ ìƒíƒœ ì¡°íšŒ
      description: |
        íŠ¹ì • ë§¤ì¥ì˜ ê´€ì‹¬ì¥ì†Œ ìƒíƒœë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìëŠ” `is_liked: false`ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.
      parameters:
        - name: store_id
          in: path
          required: true
          description: ë§¤ì¥ ê³ ìœ  ID
          schema:
            type: integer
          example: 1001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Store_like_status'
              example:
                is_liked: false
                like_count: 342
        '404':
          $ref: '#/components/responses/Error404'
        '429':
          $ref: '#/components/responses/Error429'
        '500':
          $ref: '#/components/responses/Error500'

    put:
      tags: [Store Likes]
      summary: ê´€ì‹¬ì¥ì†Œ ì¶”ê°€ (idempotent)
      description: |
        íŠ¹ì • ë§¤ì¥ì„ í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ê´€ì‹¬ì¥ì†Œë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.
        ì´ë¯¸ ì¶”ê°€ëœ ë§¤ì¥ì„ ë‹¤ì‹œ ì¶”ê°€í•´ë„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤(ë©±ë“±ì„±).
      security:
        - bearerAuth: []
      parameters:
        - name: store_id
          in: path
          required: true
          description: ë§¤ì¥ ê³ ìœ  ID
          schema:
            type: integer
          example: 1001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Store_like_status'
              example:
                is_liked: true
                like_count: 343
        '401':
          $ref: '#/components/responses/Error401'
        '404':
          $ref: '#/components/responses/Error404'
        '429':
          $ref: '#/components/responses/Error429'
        '500':
          $ref: '#/components/responses/Error500'

    delete:
      tags: [Store Likes]
      summary: ê´€ì‹¬ì¥ì†Œ ì‚­ì œ (idempotent)
      description: |
        í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ê´€ì‹¬ì¥ì†Œ ëª©ë¡ì—ì„œ íŠ¹ì • ë§¤ì¥ì„ ì œê±°í•©ë‹ˆë‹¤.
        ì´ë¯¸ ì œê±°ëœ ë§¤ì¥ì„ ë‹¤ì‹œ ì‚­ì œí•´ë„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤(ë©±ë“±ì„±).
      security:
        - bearerAuth: []
      parameters:
        - name: store_id
          in: path
          required: true
          description: ë§¤ì¥ ê³ ìœ  ID
          schema:
            type: integer
          example: 1001
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Store_like_status'
              example:
                is_liked: false
                like_count: 342
        '401':
          $ref: '#/components/responses/Error401'
        '404':
          $ref: '#/components/responses/Error404'
        '429':
          $ref: '#/components/responses/Error429'
        '500':
          $ref: '#/components/responses/Error500'

  /map/stores/liked:
    get:
      tags: [Store Likes]
      summary: ë‚´ ê´€ì‹¬ì¥ì†Œ ëª©ë¡ ì¡°íšŒ (ë¬´í•œ ìŠ¤í¬ë¡¤)
      description: |
        í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ì €ì¥í•œ ê´€ì‹¬ì¥ì†Œ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
        `is_liked` í•„í„°ë¥¼ í†µí•´ ê´€ì‹¬ì¥ì†Œ(1) ë˜ëŠ” ì¼ë°˜ ë§¤ì¥(0)ì„ ì„ íƒì ìœ¼ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      security:
        - bearerAuth: []
      parameters:
        - name: is_liked
          in: query
          description: |
            ê´€ì‹¬ì¥ì†Œ í•„í„°
            - 0: ê´€ì‹¬ì¥ì†Œê°€ ì•„ë‹Œ ë§¤ì¥ë§Œ
            - 1: ê´€ì‹¬ì¥ì†Œë¡œ ì €ì¥ëœ ë§¤ì¥ë§Œ
            - ë¯¸ì§€ì •: ì „ì²´ ë§¤ì¥
          required: false
          schema:
            type: integer
            enum: [0, 1]
          example: 1
        - name: cursor
          in: query
          description: í˜ì´ì§€ë„¤ì´ì…˜ ì»¤ì„œ (ë‹¤ìŒ í˜ì´ì§€ ìš”ì²­ ì‹œ ì´ì „ ì‘ë‹µì˜ next_cursor ì‚¬ìš©)
          required: false
          schema:
            type: integer
          example: 20
        - name: limit
          in: query
          description: í•œ ë²ˆì— ê°€ì ¸ì˜¬ í•­ëª© ìˆ˜ (ê¸°ë³¸ 20, ìµœëŒ€ 100)
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
      responses:
        '200':
          description: ê´€ì‹¬ì¥ì†Œ ëª©ë¡ ì¡°íšŒ ì„±ê³µ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Liked_store'
                  metadata:
                    $ref: '#/components/schemas/Infinite_scroll_metadata'
                required:
                  - success
                  - data
                  - metadata
              example:
                data:
                  - like_place_id: "MTIzNDU="
                    store:
                      id: 1001
                      name: í–‰ë³µë™ë¬¼ë³‘ì›
                      category:
                        name: ë™ë¬¼ë³‘ì›
                      address:
                        province: ì„œìš¸íŠ¹ë³„ì‹œ
                        district: ê°•ë‚¨êµ¬
                        neighborhood: ì—­ì‚¼ë™
                        detail: 123-45
                        full_address: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 123-45
                        latitude: 37.55878709
                        longtitude: 126.82717098
                      phone: 02-1234-5678
                      distance: null
                    created_at: "2025-11-05T10:30:00Z"
                  - like_place_id: "MTIzNDY="
                    store:
                      id: 1002
                      name: í«ì¼€ì–´ ë™ë¬¼ì˜ë£Œì„¼í„°
                      category:
                        id: "1"
                        name: ë™ë¬¼ë³‘ì›
                      address:
                        province: ì„œìš¸íŠ¹ë³„ì‹œ
                        district: ê°•ë‚¨êµ¬
                        neighborhood: ì‚¼ì„±ë™
                        detail: 567-89
                        full_address: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì‚¼ì„±ë™ 567-89
                        latitude: 37.55878709
                        longtitude: 126.82717098
                      phone: 02-9876-5432
                      distance: null
                    created_at: "2025-11-04T15:20:00Z"
                metadata:
                  next_cursor: 20
                  has_more: true
                  total_count: 45
        '401':
          $ref: '#/components/responses/Error401'
        '500':
          $ref: '#/components/responses/Error500'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT í† í°ì„ ì‚¬ìš©í•œ ì¸ì¦.

  parameters:
    # ì»¤ë®¤ë‹ˆí‹°ìš© íŒŒë¼ë¯¸í„° (ì›ë³¸ ìœ ì§€, IDë§Œ í†µí•©)
    View:
      name: view
      in: query
      description: |
        ëª©ë¡ ë·° ì¢…ë¥˜ ì„ íƒ:
        - main: ë©”ì¸(ë¬´í•œìŠ¤í¬ë¡¤, after/limit)
        - community: ì»¤ë®¤ë‹ˆí‹°(í˜ì´ì§€ë„¤ì´ì…˜, page/page_size)
      schema:
        type: string
        enum: [main, community]
        default: community
    After:
      name: after
      in: query
      description: |
        ì»¤ì„œ ê¸°ë°˜ ë¬´í•œìŠ¤í¬ë¡¤ í† í°(ë©”ì¸ ì „ìš©).
        ì´ì „ ì‘ë‹µì˜ next_after ê°’ì„ ê·¸ëŒ€ë¡œ ì „ë‹¬í•˜ì„¸ìš”. ì²« í˜ì´ì§€ëŠ” ìƒëµ.
      schema:
        type: string
        example: post_cursor_20251020T120000_101
    Limit:
      name: limit
      in: query
      description: ë©”ì¸(ë¬´í•œìŠ¤í¬ë¡¤)ì—ì„œ í•œ ë²ˆì— ê°€ì ¸ì˜¬ ê²Œì‹œê¸€ ìˆ˜.
      schema:
        type: integer
        minimum: 1
        maximum: 50
        default: 12
    Page:
      name: page
      in: query
      description: ì»¤ë®¤ë‹ˆí‹°(í˜ì´ì§€ë„¤ì´ì…˜)ì—ì„œì˜ í˜ì´ì§€ ë²ˆí˜¸(1ë¶€í„° ì‹œì‘).
      schema:
        type: integer
        minimum: 1
        default: 1
    PageSize:
      name: page_size
      in: query
      description: ì»¤ë®¤ë‹ˆí‹°ì—ì„œ í˜ì´ì§€ ë‹¹ í•­ëª© ìˆ˜.
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    Category:
      name: category
      in: query
      description: ì»¤ë®¤ë‹ˆí‹° ëª©ë¡ì—ì„œ ì¹´í…Œê³ ë¦¬ í•„í„°.
      schema:
        type: string
        enum: [ì „ì²´, ììœ ê²Œì‹œíŒ, ì •ë³´ê³µìœ , ì§ˆë¬¸ê²Œì‹œíŒ]
    Sort:
      name: sort
      in: query
      description: ì •ë ¬ ê¸°ì¤€ (latest=ìµœì‹ ìˆœ, views=ì¡°íšŒìˆœ, likes=ì¶”ì²œìˆœ)
      schema:
        type: string
        enum: [latest, views, likes]
        default: latest
        x-enumNames: [ìµœì‹ ìˆœ, ì¡°íšŒìˆœ, ì¶”ì²œìˆœ]
        x-enumDescriptions:
          - ìµœì‹  ê²Œì‹œë¬¼ì´ ë¨¼ì € ë³´ì´ë„ë¡ ì •ë ¬
          - ì¡°íšŒìˆ˜ê°€ ë†’ì€ ìˆœì„œë¡œ ì •ë ¬
          - ì¶”ì²œ(ì¢‹ì•„ìš”) ìˆ˜ê°€ ë§ì€ ìˆœì„œë¡œ ì •ë ¬
    Q:
      name: q
      in: query
      description: |
        ê²€ìƒ‰ì–´. `search_in`ì— ë”°ë¼ ì œëª©, ë‚´ìš© ë˜ëŠ” ë‘˜ ë‹¤ì—ì„œ ë¶€ë¶„ ì¼ì¹˜ë¡œ ê²€ìƒ‰.
      schema:
        type: string
        minLength: 1
    SearchIn:
      name: search_in
      in: query
      description: ê²€ìƒ‰ ëŒ€ìƒ í•„ë“œ ì„ íƒ.
      schema:
        type: string
        enum: [title, content, title_content]
        default: title_content
    Include:
      name: include
      in: query
      description: ìƒì„¸ ì¡°íšŒ ì‹œ ëŒ“ê¸€ í”„ë¦¬ë·° í¬í•¨ ì˜µì…˜.
      schema:
        type: string
        enum: [comments]
    CommentsLimit:
      name: comments_limit
      in: query
      description: ëŒ“ê¸€ í”„ë¦¬ë·° ê°œìˆ˜ ì œí•œ.
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    CommentsAfter:
      name: comments_after
      in: query
      description: ëŒ“ê¸€ í”„ë¦¬ë·° ì»¤ì„œ(ë”ë³´ê¸°ìš©).
      schema:
        type: string
        example: cmt_cursor_20251021_030600
    PostId64:
      name: post_id
      in: path
      required: true
      schema:
        $ref: '#/components/schemas/Id64'
      description: ê²Œì‹œê¸€ ID (base64 ì¸ì½”ë”©ëœ ë¬¸ìì—´)
    CommentId64:
      name: comment_id
      in: path
      required: true
      schema:
        $ref: '#/components/schemas/Id64'
      description: ëŒ“ê¸€ ID (base64 ì¸ì½”ë”©ëœ ë¬¸ìì—´)

  schemas:
    # ê³µí†µ ID (base64 ë¬¸ìì—´)
    Id64:
      type: string
      description: base64ë¡œ ì¸ì½”ë”©ëœ ê³ ìœ  ID
      pattern: '^[A-Za-z0-9+/=]+$'
      example: MTIzNDU2Nzg5MDEyMw==

    # ----- ì»¤ë®¤ë‹ˆí‹° ìŠ¤í‚¤ë§ˆ (ì›ë³¸ ìœ ì§€, ID ì˜ˆì‹œëŠ” base64ë¡œ ì •ë¦¬) -----
    Author:
      type: object
      properties:
        user_id:
          $ref: '#/components/schemas/Id64'
        nickname:
          type: string
      required: [user_id, nickname]
      example:
        user_id: MTIzNDU2Nzg5MDEyMw==
        nickname: "ë”°ëœ»í•œ ì—°ê·¼"
        
    MyProfileResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            user_id:
              $ref: '#/components/schemas/Id64'
            email:
              type: string
              format: email
            nickname:
              type: string
            username:
              type: string
            gender:
              type: string
              description: "male / female"
              nullable: true
            has_pet:
              type: boolean
            created_at:
              type: string
              format: date-time
          required: [user_id, email, nickname]
      example:
        success: true
        data:
          user_id: "MTIzNDU2"
          email: "test@test.com"
          nickname: "ë‹‰ë„¤ì„"
          username: "ì´ë¦„"
          gender: "male"
          has_pet: false
          created_at: "2025-01-01T12:00:00Z"

    MyProfileUpdateRequest:
      type: object
      description: "í”„ë¡œí•„ ìˆ˜ì • ìš”ì²­ (ë°˜ë ¤ë™ë¬¼ ìœ ë¬´ nullable, ì „ë‹¬ëœ ê°’ë§Œ ìˆ˜ì •)"
      properties:
        nickname:
          type: string
          minLength: 2
          maxLength: 30
          nullable: False
        gender:
          type: string
          enum: [male, female]
          nullable: False
        has_pet:
          type: boolean
          nullable: true
      additionalProperties: false

    PasswordChangeRequest:
      type: object
      properties:
        new_password:
          type: string
          minLength: 8
        new_password_confirm:
          type: string
          minLength: 8
      required: [new_password, new_password_confirm]

    MyReportPost:
      type: object
      properties:
        report_id:
          $ref: '#/components/schemas/Id64'
        post:
          $ref: '#/components/schemas/PostListItemCommunity'
        reason:
          type: string
        detail:
          type: string
          nullable: true
        status:
          type: string
          description: "pending/processing/resolved/rejected ë“±"
        created_at:
          type: string
          format: date-time
      required: [report_id, post, reason, status, created_at]

    PostListItemMain:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/Id64'
        title:
          type: string
        image_url:
          type: string
          nullable: true
        author:
          $ref: '#/components/schemas/Author'
      required: [id, title, author]
      example:
        id: MTAx
        title: "ì˜¤ëŠ˜ ì‚°ì±…í•˜ê¸° ì¢‹ì€ ì½”ìŠ¤"
        image_url: "https://cdn.withpet.com/posts/p101.jpg"
        author:
          user_id: Nw==
          nickname: "ì½”ì½”ë§˜"

    PostListItemCommunity:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/Id64'
        title:
          type: string
        content_snippet:
          type: string
          maxLength: 200
          description: "ê²Œì‹œê¸€ ë‚´ìš©ì˜ ìš”ì•½(ì²˜ìŒ Nì, ì˜ˆ: 180~200ì). ì„œë²„ì—ì„œ ê¸¸ì´ ì œí•œì— ë§ì¶° ì˜ë¼ ë°˜í™˜."
        category:
          type: string
          enum: [ì „ì²´, ììœ ê²Œì‹œíŒ, ì •ë³´ê³µìœ , ì§ˆë¬¸ê²Œì‹œíŒ]
        image_url:
          type: string
          nullable: true
        author:
          $ref: '#/components/schemas/Author'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        view_count:
          type: integer
        like_count:
          type: integer
        comment_count:
          type: integer
        is_liked_by_me:
          type: boolean
          description: "í˜„ì¬ ì‚¬ìš©ì ì‹œì ì˜ ì¢‹ì•„ìš” ì—¬ë¶€(ë¹„ë¡œê·¸ì¸ ë˜ëŠ” ë¯¸ì¢‹ì•„ìš”: false)"
      required:
        - id
        - title
        - category
        - author
        - created_at
        - updated_at
        - view_count
        - like_count
        - comment_count
      example:
        id: MTAx
        title: "ë°˜ë ¤ê²¬ê³¼ í•¨ê»˜í•˜ëŠ” ê°€ì„ ì‚°ì±… ì½”ìŠ¤ ì¶”ì²œ"
        content_snippet: "ë„ì‹¬ì—ì„œë„ ê°•ì•„ì§€ì™€ í•¨ê»˜ ê±·ê¸° ì¢‹ì€ ì½”ìŠ¤ë¥¼ ì •ë¦¬í–ˆì–´ìš”â€¦"
        category: "ì •ë³´ê³µìœ "
        image_url: "https://cdn.withpet.com/posts/p101.jpg"
        author:
          user_id: Nw==
          nickname: "ì½”ì½”ë§˜"
        created_at: "2025-10-20T10:20:30Z"
        updated_at: "2025-10-20T12:00:00Z"
        view_count: 345
        like_count: 12
        comment_count: 5
        is_liked_by_me: false

    PostDetail:
      allOf:
        - $ref: '#/components/schemas/PostListItemCommunity'
        - type: object
          properties:
            content:
              type: string
              description: "ê²Œì‹œê¸€ ì „ì²´ ë³¸ë¬¸"
      example:
        id: MTAx
        title: "ë°˜ë ¤ê²¬ê³¼ í•¨ê»˜í•˜ëŠ” ê°€ì„ ì‚°ì±… ì½”ìŠ¤ ì¶”ì²œ"
        content: "ë„ì‹¬ ì† ê³µì›ë¶€í„° í•œê°• ë³€ê¹Œì§€, ë°˜ë ¤ê²¬ê³¼ í•¨ê»˜ ê±·ê¸° ì¢‹ì€ ì½”ìŠ¤ë¥¼ ìƒì„¸íˆ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. ì¤€ë¹„ë¬¼, ì£¼ì˜ì‚¬í•­, ê·¼ì²˜ ì• ê²¬ì¹´í˜ ì •ë³´ë„ í¬í•¨í–ˆì–´ìš”."
        category: "ì •ë³´ê³µìœ "
        image_url: "https://cdn.withpet.com/posts/p101.jpg"
        author:
          user_id: Nw==
          nickname: "ì½”ì½”ë§˜"
        created_at: "2025-10-20T10:20:30Z"
        updated_at: "2025-10-20T12:00:00Z"
        view_count: 345
        like_count: 12
        comment_count: 5
        is_liked_by_me: true

    Comment:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/Id64'
        author:
          $ref: '#/components/schemas/Author'
        content:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        is_deleted:
          type: boolean
      required: [id, author, content, created_at, updated_at, is_deleted]
      example:
        id: NTUwMQ==
        author:
          user_id: MTk=
          nickname: "ë”°ëœ»í•œ ì—°ê·¼"
        content: "ì¢‹ì€ ì •ë³´ ê°ì‚¬í•©ë‹ˆë‹¤! ì£¼ì°¨ëŠ” ì–´ë””ì— í•˜ë©´ ì¢‹ì„ê¹Œìš”?"
        created_at: "2025-10-21T02:00:00Z"
        updated_at: "2025-10-21T02:10:00Z"
        is_deleted: false

    CommentsBlock:
      type: object
      description: |-
        ëŒ“ê¸€ ëª©ë¡(í”„ë¦¬ë·°/í˜ì´ì§€ë„¤ì´ì…˜) ì»¨í…Œì´ë„ˆì…ë‹ˆë‹¤.
        ì‚¬ìš©ì²˜:
        - `GET /withpet/posts/{post_id}`ì—ì„œ `include=comments`ì¼ ë•Œ ëŒ“ê¸€ í”„ë¦¬ë·°ë¡œ í¬í•¨ë©ë‹ˆë‹¤.
        - ì´í›„ "ë”ë³´ê¸°" UXì—ì„œëŠ” ì‘ë‹µì˜ `next_after` ê°’ì„ ê·¸ëŒ€ë¡œ `comments_after`ë¡œ ì „ë‹¬í•´ ë‹¤ìŒ ë°°ì¹˜ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.

        í•„ë“œ ì˜ë¯¸:
        - `items`: ì´ë²ˆ í˜¸ì¶œë¡œ ìˆ˜ì‹ í•œ ëŒ“ê¸€ ë°°ì—´ì…ë‹ˆë‹¤.
        - `total_count`: í•´ë‹¹ ê²Œì‹œê¸€ì˜ ì „ì²´ ëŒ“ê¸€ ìˆ˜(ì„œë²„ ì •ì±…ì— ë”°ë¼ ì§€ì—° ë°˜ì˜ë  ìˆ˜ ìˆìŒ)ì…ë‹ˆë‹¤.
        - `has_next`: ë’¤ì— ë” ë¶ˆëŸ¬ì˜¬ ëŒ“ê¸€ì´ ìˆìœ¼ë©´ `true`ì…ë‹ˆë‹¤.
        - `next_after`: ë‹¤ìŒ í˜¸ì¶œì„ ìœ„í•œ ì»¤ì„œì…ë‹ˆë‹¤. ë§ˆì§€ë§‰ í˜ì´ì§€ë©´ `null`ì…ë‹ˆë‹¤.
      properties:
        items:
          type: array
          minItems: 0
          description: ì´ë²ˆ ë°°ì¹˜ì˜ ëŒ“ê¸€ ëª©ë¡.
          items:
            $ref: '#/components/schemas/Comment'
        total_count:
          type: integer
          minimum: 0
          description: ì´ ê²Œì‹œê¸€ì˜ ì „ì²´ ëŒ“ê¸€ ìˆ˜(ì§€ì—° ë°˜ì˜ ê°€ëŠ¥).
        has_next:
          type: boolean
          description: ë‹¤ìŒ ë°°ì¹˜ê°€ ìˆìœ¼ë©´ true.
        next_after:
          type: string
          nullable: true
          description: ë‹¤ìŒ í˜¸ì¶œì„ ìœ„í•œ ì»¤ì„œ. ë‹¤ìŒ ìš”ì²­ì˜ `comments_after`ë¡œ ê·¸ëŒ€ë¡œ ì „ë‹¬.
      example:
        items:
          - id: NTUwMQ==
            author:
              user_id: MTk=
              nickname: "ë”°ëœ»í•œ ì—°ê·¼"
            content: "ì¢‹ì€ ì •ë³´ ê°ì‚¬í•©ë‹ˆë‹¤! ì£¼ì°¨ëŠ” ì–´ë””ì— í•˜ë©´ ì¢‹ì„ê¹Œìš”?"
            created_at: "2025-10-21T02:00:00Z"
            updated_at: "2025-10-21T02:10:00Z"
            is_deleted: false
          - id: NTUwMg==
            author:
              user_id: MjM=
              nickname: "ëª¨ëª¨ì•„ë¹ "
            content: "í•œê°• ê³µì› ìª½ ê³µì˜ì£¼ì°¨ì¥ ì¶”ì²œë“œë ¤ìš”."
            created_at: "2025-10-21T03:05:00Z"
            updated_at: "2025-10-21T03:05:00Z"
            is_deleted: false
        total_count: 42
        has_next: true
        next_after: "cmt_cursor_20251021_030600"

    LikeStatus:
      type: object
      properties:
        is_liked:
          type: boolean
          description: "í˜„ì¬ ì‚¬ìš©ì ì‹œì ì˜ ì¢‹ì•„ìš” ì—¬ë¶€(ë¹„ë¡œê·¸ì¸ ë˜ëŠ” ë¯¸ì¢‹ì•„ìš”: false)"
        like_count:
          type: integer
          description: "ê²Œì‹œê¸€ì˜ ì´ ì¢‹ì•„ìš” ìˆ˜"
      required: [is_liked, like_count]
      example:
        is_liked: true
        like_count: 13

    ReportRequest:
      oneOf:
        - type: object
          properties:
            reason:
              type: string
              enum:
                - "í˜ì˜¤ ë° ì°¨ë³„"
                - "ìš•ì„¤ ë° ë¹„ë°©"
                - "ë¶ˆë²• ì •ë³´"
                - "ìŠ¤íŒ¸ ë° í™ë³´ì„± ê²Œì‹œë¬¼"
                - "ê°œì¸ì •ë³´ ì¹¨í•´"
                - "ì €ì‘ê¶Œ/ì§€ì ì¬ì‚°ê¶Œ ì¹¨í•´"
                - "ì²­ì†Œë…„ ìœ í•´ ì •ë³´"
            detail:
              type: string
              nullable: true
          required: [reason]
        - type: object
          properties:
            reason:
              type: string
              enum: ["ê¸°íƒ€"]
            detail:
              type: string
              minLength: 5
          required: [reason, detail]
      example:
        reason: "ìŠ¤íŒ¸ ë° í™ë³´ì„± ê²Œì‹œë¬¼"
        detail: "ë™ì¼ ë§í¬ ë°˜ë³µ ì—…ë¡œë“œ"

    PostCreateJson:
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 100
        content:
          type: string
          minLength: 1
          maxLength: 20000
        category:
          type: string
          enum: [ì „ì²´, ììœ ê²Œì‹œíŒ, ì •ë³´ê³µìœ , ì§ˆë¬¸ê²Œì‹œíŒ]
      required: [title, content, category]
      example:
        title: "ë°˜ë ¤ê²¬ ì‚°ì±… ë©”ì´íŠ¸ êµ¬í•´ìš”"
        content: "ì£¼ë§ ì˜¤ì „ì— í•¨ê»˜ ì‚°ì±…í•˜ì‹¤ ë¶„ êµ¬í•©ë‹ˆë‹¤. ë§ì›í•œê°•ê³µì› ê·¼ì²˜ì˜ˆìš”."
        category: "ììœ ê²Œì‹œíŒ"

    PostUpdateJson:
      type: object
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 100
          nullable: true
        content:
          type: string
          minLength: 1
          maxLength: 20000
          nullable: true
        category:
          type: string
          enum: [ì „ì²´, ììœ ê²Œì‹œíŒ, ì •ë³´ê³µìœ , ì§ˆë¬¸ê²Œì‹œíŒ]
          nullable: true
        image_delete:
          type: boolean
          nullable: true
      additionalProperties: false
      example:
        title: "ë°˜ë ¤ê²¬ ì‚°ì±… ë©”ì´íŠ¸ êµ¬í•´ìš”(ì‹œê°„ ë³€ê²½)"
        content: "ì£¼ë§ ì˜¤í›„ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. ì¥ì†ŒëŠ” ë™ì¼í•´ìš”!"
        category: "ììœ ê²Œì‹œíŒ"
        image_delete: false

    # ë³‘í•©ë³¸ í•˜ìœ„ í˜¸í™˜ì„ ìœ„í•œ snake_case ë³„ì¹­ (ìš”ì²­í•˜ì‹  $ref ì˜¤ë¥˜ í•´ê²°)
    Post_update_json:
      allOf:
        - $ref: '#/components/schemas/PostUpdateJson'

    PostsListMainResponse:
      type: object
      properties:
        posts:
          type: array
          items:
            $ref: '#/components/schemas/PostListItemMain'
        has_next:
          type: boolean
        next_after:
          type: string
          nullable: true
      required: [posts, has_next]
      example:
        posts:
          - id: MTAx
            title: "ì˜¤ëŠ˜ ì‚°ì±…í•˜ê¸° ì¢‹ì€ ì½”ìŠ¤"
            image_url: "https://cdn.withpet.com/posts/p101.jpg"
            author:
              user_id: Nw==
              nickname: "ì½”ì½”ë§˜"
          - id: MTAy
            title: "ê²¨ìš¸ ëŒ€ë¹„ ê°•ì•„ì§€ íŒ¨ë”© í›„ê¸°"
            image_url: null
            author:
              user_id: MTE=
              nickname: "ì¸„ë¦…ì§‘ì‚¬"
        has_next: true
        next_after: "post_cursor_20251020_120000"

    PostsListCommunityResponse:
      type: object
      properties:
        posts:
          type: array
          items:
            $ref: '#/components/schemas/PostListItemCommunity'
        page:
          type: integer
        page_size:
          type: integer
        total:
          type: integer
      required: [posts, page, page_size]
      example:
        posts:
          - id: MTAx
            title: "ë°˜ë ¤ê²¬ê³¼ í•¨ê»˜í•˜ëŠ” ê°€ì„ ì‚°ì±… ì½”ìŠ¤ ì¶”ì²œ"
            content_snippet: "ë„ì‹¬ì—ì„œë„ ê°•ì•„ì§€ì™€ í•¨ê»˜ ê±·ê¸° ì¢‹ì€ ì½”ìŠ¤ë¥¼ ì •ë¦¬í–ˆì–´ìš”â€¦"
            category: "ì •ë³´ê³µìœ "
            image_url: "https://cdn.withpet.com/posts/p101.jpg"
            author:
              user_id: Nw==
              nickname: "ì½”ì½”ë§˜"
            created_at: "2025-10-20T10:20:30Z"
            updated_at: "2025-10-20T12:00:00Z"
            view_count: 345
            like_count: 12
            comment_count: 5
            is_liked_by_me: false
          - id: OTk=
            title: "ê°•ì•„ì§€ ì´ˆë³´ ì…ì–‘ìë¥¼ ìœ„í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸"
            content_snippet: "ì‚¬ë£Œ/ë°°ë³€/ì‚°ì±… ì¤€ë¹„ë¬¼ë¶€í„° ì˜ˆë°©ì ‘ì¢…ê¹Œì§€â€¦"
            category: "ì •ë³´ê³µìœ "
            image_url: null
            author:
              user_id: MTk=
              nickname: "ë”°ëœ»í•œ ì—°ê·¼"
            created_at: "2025-10-18T09:00:00Z"
            updated_at: "2025-10-18T09:00:00Z"
            view_count: 712
            like_count: 40
            comment_count: 22
            is_liked_by_me: false
        page: 1
        page_size: 20
        total: 153

    PostDetailResponse:
      type: object
      properties:
        post:
          $ref: '#/components/schemas/PostDetail'
        comments:
          $ref: '#/components/schemas/CommentsBlock'
      required: [post]
      example:
        post:
          id: MTAx
          title: "ë°˜ë ¤ê²¬ê³¼ í•¨ê»˜í•˜ëŠ” ê°€ì„ ì‚°ì±… ì½”ìŠ¤ ì¶”ì²œ"
          content: "ë„ì‹¬ ì† ê³µì›ë¶€í„° í•œê°• ë³€ê¹Œì§€, ë°˜ë ¤ê²¬ê³¼ í•¨ê»˜ ê±·ê¸° ì¢‹ì€ ì½”ìŠ¤ë¥¼ ìƒì„¸íˆ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤..."
          category: "ì •ë³´ê³µìœ "
          image_url: "https://cdn.withpet.com/posts/p101.jpg"
          author:
            user_id: Nw==
            nickname: "ì½”ì½”ë§˜"
          created_at: "2025-10-20T10:20:30Z"
          updated_at: "2025-10-20T12:00:00Z"
          view_count: 345
          like_count: 12
          comment_count: 5
          is_liked_by_me: true

    # ----- ì§€ë„/ë§¤ì¥/ê³µí†µ ìŠ¤í‚¤ë§ˆ (ê¸°ì¡´ ë³‘í•©ë³¸ ìœ ì§€) -----
    Location:
      type: object
      properties:
        id:
          type: integer
          description: ì§€ì—­ ID
        name:
          type: string
          description: ì§€ì—­ëª…
        type:
          type: string
          enum: [province, district, neighborhood]
          description: ì§€ì—­ íƒ€ì…
        parent_id:
          type: string
          nullable: true
          description: ìƒìœ„ ì§€ì—­ ID
      required: [id, name, type]

    Category:
      type: object
      properties:
        id:
          type: string
          description: ì¹´í…Œê³ ë¦¬ ID
        name:
          type: string
          description: ì¹´í…Œê³ ë¦¬ëª…
        code:
          type: string
          description: ì¹´í…Œê³ ë¦¬ ì½”ë“œ
      required: [id, name, code]

    Address:
      type: object
      properties:
        province:
          type: string
          description: ë„/ê´‘ì—­ì‹œ
        district:
          type: string
          description: ì‹œ/êµ¬/êµ°
        neighborhood:
          type: string
          description: ì/ë©´/ë™
        detail:
          type: string
          description: ìƒì„¸ ì£¼ì†Œ
        full_address:
          type: string
          description: ì „ì²´ ì£¼ì†Œ
        postal_code:
          type: string
          description: ìš°í¸ë²ˆí˜¸
      required: [province, district, full_address]

    Store:
      type: object
      properties:
        id:
          type: integer
          description: ë§¤ì¥ ID (integer)
        name:
          type: string
          description: ë§¤ì¥ ì´ë¦„
        category:
          type: object
          properties:
            id:
              type: string
            name:
              type: string
        address:
          $ref: '#/components/schemas/Address'
        phone:
          type: string
          description: ì „í™”ë²ˆí˜¸
        rating:
          type: number
          format: float
          description: í‰ì  (0-5)
        review_count:
          type: integer
          description: ë¦¬ë·° ìˆ˜
        tags:
          type: array
          items:
            type: string
          description: íƒœê·¸ ëª©ë¡
        distance:
          type: number
          format: float
          nullable: true
          description: ê±°ë¦¬ (km, ì¢Œí‘œ ì œê³µ ì‹œì—ë§Œ)
        thumbnail_url:
          type: string
          description: ì¸ë„¤ì¼ ì´ë¯¸ì§€ URL
        like_count:
          type: integer
          description: ê´€ì‹¬ì¥ì†Œë¡œ ì €ì¥í•œ ì‚¬ìš©ì ìˆ˜
          default: 0
      required: [id, name, category, address]

    Infinite_scroll_metadata:
      type: object
      description: ë¬´í•œ ìŠ¤í¬ë¡¤ ë©”íƒ€ë°ì´í„° (ë§¤ì¥ ê²€ìƒ‰ ë° ê¸°íƒ€ ë¦¬ìŠ¤íŠ¸ì— ì ìš©)
      properties:
        next_cursor:
          type: integer
          nullable: true
          description: ë‹¤ìŒ í˜ì´ì§€ ì»¤ì„œ (ë” ì´ìƒ ì—†ìœ¼ë©´ null)
        has_more:
          type: boolean
          description: ë‹¤ìŒ í˜ì´ì§€ ì¡´ì¬ ì—¬ë¶€
        total_count:
          type: integer
          nullable: true
          description: ì „ì²´ ì•„ì´í…œ ìˆ˜ (ì„ íƒì‚¬í•­, ì„±ëŠ¥ìƒ ì œê³µí•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ)
      required: [next_cursor, has_more]

    Applied_filters:
      type: object
      description: í˜„ì¬ ì ìš©ëœ ê²€ìƒ‰ í•„í„°
      properties:
        province:
          type: string
          nullable: true
        district:
          type: string
          nullable: true
        neighborhood:
          type: string
          nullable: true
        categories:
          type: array
          items:
            type: string
        keyword:
          type: string
          nullable: true

    Store_like_status:
      type: object
      description: ë§¤ì¥ ê´€ì‹¬ì¥ì†Œ ìƒíƒœ
      properties:
        is_liked:
          type: boolean
          description: "í˜„ì¬ ì‚¬ìš©ìì˜ ê´€ì‹¬ì¥ì†Œ ì—¬ë¶€ (ë¹„ë¡œê·¸ì¸ ë˜ëŠ” ë¯¸ì €ì¥: false)"
        like_count:
          type: integer
          description: í•´ë‹¹ ë§¤ì¥ì„ ê´€ì‹¬ì¥ì†Œë¡œ ì €ì¥í•œ ì´ ì‚¬ìš©ì ìˆ˜
      required: [is_liked, like_count]
      example:
        is_liked: true
        like_count: 342

    Liked_store:
      type: object
      description: ê´€ì‹¬ì¥ì†Œë¡œ ì €ì¥ëœ ë§¤ì¥ ì •ë³´
      properties:
        like_place_id:
          $ref: '#/components/schemas/Id64'
          description: ê´€ì‹¬ì¥ì†Œ ê³ ìœ  ID (base64 ì¸ì½”ë”©)
        store:
          allOf:
            - $ref: '#/components/schemas/Store'
            - type: object
              properties:
                like_count:
                  type: integer
                  description: ì´ ë§¤ì¥ì„ ê´€ì‹¬ì¥ì†Œë¡œ ì €ì¥í•œ ì´ ì‚¬ìš©ì ìˆ˜
              required: [like_count]
        created_at:
          type: string
          format: date-time
          description: ê´€ì‹¬ì¥ì†Œë¡œ ì¶”ê°€í•œ ì‹œê°„
      required: [like_place_id, store, created_at]
      example:
        like_place_id: "MTIzNDU="
        store:
          id: 1001
          name: í–‰ë³µë™ë¬¼ë³‘ì›
          category:
            id: "1"
            name: ë™ë¬¼ë³‘ì›
          address:
            province: ì„œìš¸íŠ¹ë³„ì‹œ
            district: ê°•ë‚¨êµ¬
            neighborhood: ì—­ì‚¼ë™
            detail: 123-45
            full_address: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—­ì‚¼ë™ 123-45
            latitude: 37.55878709
            longtitude: 126.82717098
          phone: 02-1234-5678
          tags:
            - 24ì‹œê°„
            - ì£¼ì°¨ê°€ëŠ¥
          distance: null
        created_at: "2025-11-05T10:30:00Z"

    Api_error:
      type: object
      properties:
        code:
          type: string
          description: ì—ëŸ¬ ì½”ë“œ
        message:
          type: string
          description: ì—ëŸ¬ ë©”ì‹œì§€
        details:
          type: object
          description: ìƒì„¸ ì—ëŸ¬ ì •ë³´
          nullable: true
      required: [code, message]

    Api_error_wrapper:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          $ref: '#/components/schemas/Api_error'
      required: [success, error]

    Api_success_wrapper:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          description: ì„±ê³µ ë©”ì‹œì§€ (ì„ íƒ ì‚¬í•­)
          example: ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.
      required: [success]

    # (ì»¤ë®¤ë‹ˆí‹° ì›ë³¸ì˜ Error ìŠ¤í‚¤ë§ˆë„ ë³´ì¡´)
    Error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string
        field_errors:
          type: array
          items:
            type: object
            properties:
              field:
                type: string
              reason:
                type: string
              rule:
                type: string
      required: [code, message]

  requestBodies:
    # ì»¤ë®¤ë‹ˆí‹° ì›ë³¸
    PostCreate:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PostCreateJson'
          example:
            title: "ë°˜ë ¤ê²¬ ì‚°ì±… ë©”ì´íŠ¸ êµ¬í•´ìš”"
            content: "ì£¼ë§ ì˜¤ì „ì— í•¨ê»˜ ì‚°ì±…í•˜ì‹¤ ë¶„ êµ¬í•©ë‹ˆë‹¤. ë§ì›í•œê°•ê³µì› ê·¼ì²˜ì˜ˆìš”."
            category: "ììœ ê²Œì‹œíŒ"
        multipart/form-data:
          schema:
            type: object
            properties:
              title:
                type: string
              content:
                type: string
              category:
                type: string
                enum: [ì „ì²´, ììœ ê²Œì‹œíŒ, ì •ë³´ê³µìœ , ì§ˆë¬¸ê²Œì‹œíŒ]
              image:
                type: string
                format: binary
            required: [title, content, category]
          encoding:
            image:
              contentType: image/*
          example:
            title: "ë°˜ë ¤ë¬˜ í™”ì¥ì‹¤ ëª¨ë˜ ì¶”ì²œ"
            content: "ë¨¼ì§€ ì ê³  íƒˆì·¨ë ¥ ì¢‹ì€ ì œí’ˆ ê³µìœ í•©ë‹ˆë‹¤."
            category: "ì •ë³´ê³µìœ "
            image: "(binary)"

    PostUpdate:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PostUpdateJson'
          example:
            title: "ë°˜ë ¤ê²¬ ì‚°ì±… ë©”ì´íŠ¸ êµ¬í•´ìš”(ì‹œê°„ ë³€ê²½)"
            content: "ì£¼ë§ ì˜¤í›„ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. ì¥ì†ŒëŠ” ë™ì¼í•´ìš”!"
            category: "ììœ ê²Œì‹œíŒ"
            image_delete: false
        multipart/form-data:
          schema:
            type: object
            properties:
              title:
                type: string
                nullable: true
              content:
                type: string
                nullable: true
              category:
                type: string
                enum: [ì „ì²´, ììœ ê²Œì‹œíŒ, ì •ë³´ê³µìœ , ì§ˆë¬¸ê²Œì‹œíŒ]
                nullable: true
              image:
                type: string
                format: binary
                nullable: true
          encoding:
            image:
              contentType: image/*
          example:
            title: "ê°•ì•„ì§€ íŒ¨ë”© í›„ê¸°(ì‚¬ì§„ êµì²´)"
            content: "ì‹¤ë‚´ ì¡°ëª…ì—ì„œ ì°ì€ ì‚¬ì§„ìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤."
            category: "ì •ë³´ê³µìœ "
            image: "(binary)"

    # ê¸°ì¡´ ë³‘í•©ë³¸(í˜¸í™˜ ìœ ì§€ìš©) â€” $refë“¤ì´ ìœ íš¨í•˜ë„ë¡ ìœ ì§€
    Post_create:
      required: true
      content:
        application/json:
          schema:
            allOf:
              - $ref: '#/components/schemas/Post_update_json'
              - required: [title, content, category]
        multipart/form-data:
          schema:
            type: object
            properties:
              title:
                type: string
              content:
                type: string
              category:
                type: string
                enum: [ì „ì²´, ììœ ê²Œì‹œíŒ, ì •ë³´ê³µìœ , ì§ˆë¬¸ê²Œì‹œíŒ]
              image:
                type: string
                format: binary
                nullable: true
            required: [title, content, category]

    Post_update:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Post_update_json'
        multipart/form-data:
          schema:
            type: object
            properties:
              title:
                type: string
                nullable: true
              content:
                type: string
                nullable: true
              category:
                type: string
                enum: [ì „ì²´, ììœ ê²Œì‹œíŒ, ì •ë³´ê³µìœ , ì§ˆë¬¸ê²Œì‹œíŒ]
                nullable: true
              image:
                type: string
                format: binary
                nullable: true
              image_delete:
                type: boolean
                nullable: true

  responses:
    # ê¸°ì¡´ ë³‘í•©ë³¸ ì‘ë‹µ (Auth/Map ë“±ì—ì„œ ì‚¬ìš©)
    Api_success_response:
      description: ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨ (Auth/Map APIìš©)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_success_wrapper'
    Error400:
      description: ì˜ëª»ëœ ìš”ì²­ (Bad Request)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_error_wrapper'
    Error401:
      description: ì¸ì¦ ì‹¤íŒ¨ (Unauthorized)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_error_wrapper'
    Error403:
      description: ê¶Œí•œ ì—†ìŒ (Forbidden)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_error_wrapper'
    Error404:
      description: ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ (Not Found)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_error_wrapper'
    Error409:
      description: ì¶©ëŒ (Conflict)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_error_wrapper'
    Error415:
      description: ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¯¸ë””ì–´ íƒ€ì… (Unsupported Media Type)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_error_wrapper'
    Error429:
      description: ìš”ì²­ ê³¼ë‹¤ (Too Many Requests)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_error_wrapper'
    Error500:
      description: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜ (Server Error)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Api_error_wrapper'
